<!DOCTYPE html>
<html lang="en">
<head>
	
	<!--
		Basic
	-->
	<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"> 
	<title>Plotting a line graph in Python using Matplotlib</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
	<meta name="description" content="How to create a beautifull graph using matplotlib." />
	
	<!--
		Load Fonts
	-->
	<link href="https://fonts.googleapis.com/css?family=Poppins:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.0/css/all.css">

	<!--
		Load CSS
	-->
	<link rel="stylesheet" href="css/basic.css" />
	<link rel="stylesheet" href="css/layout.css" />
	<link rel="stylesheet" href="css/blogs.css" />
	<link rel="stylesheet" href="css/ionicons.css" />
	<link rel="stylesheet" href="css/magnific-popup.css" />
	<link rel="stylesheet" href="css/animate.css" />
	<link rel="stylesheet" href="css/owl.carousel.css" />

	<link rel="stylesheet" href="css/prism.css"/>
	<!--
		Template New-Skin
	-->
	<link rel="stylesheet" href="css/new-skin/new-skin.css" />

	<!--
		Template RTL
	-->
	<!--<link rel="stylesheet" href="css/rtl.css" />-->
	
	<!--
		Template Colors
	-->
	<link rel="stylesheet" href="css/template-colors/blue.css" />
	<!--<link rel="stylesheet" href="css/template-colors/orange.css" />-->
	<!--<link rel="stylesheet" href="css/template-colors/pink.css" />-->
	<!--<link rel="stylesheet" href="css/template-colors/purple.css" />-->
	<!--<link rel="stylesheet" href="css/template-colors/red.css" />-->

	<!--
		Template Dark
	-->
	<link rel="stylesheet" href="css/template-dark/dark.css" />
	
	
	<!--[if lt IE 9]>
	<script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	
	<!--
		Favicons
	-->
	<link rel="shortcut icon" href="images/favicons/favicon.ico">
	<link rel="stylesheet" href="https://cdn.rawgit.com/jpswalsh/academicons/master/css/academicons.min.css">	
</head>

<body>	
	<div id="fb-root"></div>
<script async defer crossorigin="anonymous" src="https://connect.facebook.net/pt_BR/sdk.js#xfbml=1&version=v6.0&appId=703097563841075&autoLogAppEvents=1"></script>
	<div class="page new-skin">
		<div id="fb-root"></div>
		<script async defer crossorigin="anonymous" src="https://connect.facebook.net/pt_BR/sdk.js#xfbml=1&version=v6.0&appId=703097563841075&autoLogAppEvents=1"></script>
		
		<!-- preloader -->
		<div class="preloader">
			<div class="centrize full-width">
				<div class="vertical-center">
					<div class="spinner">
						<div class="double-bounce1"></div>
						<div class="double-bounce2"></div>
					</div>
				</div>
			</div>
		</div>

		<!-- background -->
		<div class="background"></div>

		<!--
			Container
		-->
		<div class="container opened" data-animation-in="fadeInLeft" data-animation-out="fadeOutLeft">

			<!--
				Header
			-->
			<header class="header">

				<!-- menu -->
				<div class="top-menu">
					<ul>
						<li>
							<a href="index.html">
								<span class="icon ion-home"></span>
								<span class="link">Home</span>
							</a>
						</li>
						<li class="active">
							<a href="graph-plotting-w-python-matplotlib.html">
								<span class="icon ion-chatbox-working"></span>
								<span class="link">Blog</span>
							</a>
						</li>
					</ul>
				</div>

			</header>

			<!--
				Card - Started
			-->
			<div class="card-started">

				<!--
					Profile
				-->
				<div class="profile">

					<!-- profile image -->
					<div class="slide" style="background-image: url(images/bg.jpg);"></div>

					<!-- profile photo -->
					<div class="image">
						<img src="images/profile.png" alt="" />
					</div>

					<!-- profile titles -->
					<div class="title">Ueslei Adriano Sutil</div>
					<div class="subtitle">Oceanographer</div>

					<!-- profile socials -->
					<div class="social">
						<a target="_blank" href="https://www.linkedin.com/in/usutil/"><span class="fab fa-linkedin"></span></a>
						<a target="_blank" href="https://github.com/uesleisutil"><span class="fab fa-github"></span></a>
						<a target="_blank" href="https://www.researchgate.net/profile/Ueslei_Sutil"><span class="ai ai-researchgate"></span></a>
						<a target="_blank" href="http://lattes.cnpq.br/7449952079999911"><span class="ai ai-lattes"></span></a>
						<a target="_blank" href="https://orcid.org/0000-0002-7150-536X"><span class="ai ai-orcid"></span></a>
					</div>
					
					<!-- profile buttons -->
					<div class="lnks">
						<a href="files/Ueslei_15APR2020.pdf" class="lnk" download>
							<span class="text">Download CV</span>
							<span class="ion ion-archive"></span>
						</a>
						<a href="index.html" class="lnk discover active">
							<span class="text">Back to home</span>
							<span class="arrow"></span>
						</a>
					</div>

				</div>

			</div>

			<!--
				Card - Blog
			-->
			<div class="card-inner blog blog-post animated" id="blog-card">
				<div class="card-wrap">

					<!--
						Blog Single
					-->
					<div class="content blog-single">

						<!-- title -->
						<div class="title">Blog Post</div>

						<!-- content -->
						<div class="row border-line-v">
							<div class="col col-m-12 col-t-12 col-d-12">
								<div class="post-box">
									
									<!-- blog detail -->
									<h1>Plotting a line graph in Python using Matplotlib</h1>						
									<div class="blog-detail">Posted 12 Jun 2020</div>
									
									<!-- blog image -->
									<div class="blog-image">
										<img src="images/blog/xy_graph_csv.png" alt="" />
									</div>  
									
									<!-- blog content -->
									<div class="blog-content", align="justify">
										<p>
											Without a doubt, Python is one of the most famous programming language for data science, 
											but creating a script from scratch for data visualization can be tricky.
											In this article I will guide you to create a simple line graph. 
										</p>
										<p>
											Although nowadays there is plenty of options for data visualization in Python, 
											such as <b>Seaborn</b>, <b>Plotly</b> and <b>Bokeh</b>, in this article I will 
											write about the oldest and most famous Python's data visualization library,
											<b>Matplotlib</b>. 
										</p>
										<p>
											<b>Matplotlib</b> is a library used for creating static, animated, and interactive 
											visualizations, but despite being widely used, getting a plot to look right can
											be pretty time consuming. 
										</p>
										<p>
											
											So, this article is a beginner-to-intermediate-level walkthrough on Matplotlib coding
											and requires a previous understanding in programming language.
										</p>
										<p>
											Using the database from the the brazilian <a href="http://www.inmet.gov.br">
											<b>National Institute of Meteorology</b></a>, I created a comma-separated CSV file
											from a weather station located in the city of Blumenau, where 
											an extreme precipitation event occured in november 2008.
											You can download the file <a href="https://gist.github.com/uesleisutil/2bd4dce332c7be378a374b0bc2d9fba4"><b>here</b></a>.
										</p>
										<p>
											The file consists of three collums: the first one is the year, the second is the total precipitation 
											for november and the last one is the daily maximum precipitation in november. 
										</p>
										<p>
											First, if you do not have Python installed in your computer, I suggest to download and 
											install Anaconda, a Python open-source distribution that you can use to perform Python 
											data science, install libraries and manage environments. Download Anaconda 
											<b><a href="https://www.anaconda.com/products/individual">here</a></b>.
										</p>
										<p>
											After Anaconda is installed, install those libraries:
										</p>
										<p>
											<ul class="list-style">
												<li>Pandas;</li>
												<li>Numpy;</li>
												<li>Matplotlib.</li>
											</ul>
										</p>
										<p>
											Simply write down, in the terminal, the following:
										</p>
										<p>
											<pre><code class="language-bash">$ conda install -c anaconda pandas</code></pre>
											<pre><code class="language-shell">$ conda install -c anaconda pandas </code></pre>
											<pre><code class="language-shell">$ conda install -c anaconda matplotlib </code></pre>
										</p>
										<p>
											Write the following to import the Python libraries:
										</p>
										<p>
											<pre class="language-python"><code>import pandas as pd 
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.dates as mdates
import matplotlib
from matplotlib.ticker import AutoMinorLocator</code></pre>
										</p>
										<p>
											We imported Pandas to easily handle with the CSV file. The <b>read_csv</b> function is used
											to read the <b>blumenau.csv</b> file. Also, we use: <b>keep_default_na</b> 
											to not erase the NaNs (Not a Number data), comma as <b>delimiter</b>, <b>header</b> parameter
											as None and the <b>names</b> of each collumn as Year, Total and DayMax.
										</p>
										<p>
										<pre><code class="language-python">
											file_name = pd.read_csv('blumenau.csv', 
																	keep_default_na=True,
																	delimiter=',', 
																	header=None,
																	names=['Year','Total', 'DayMax'])</code></pre>
										</p>

										<p>
											Store the Year collumn from <b>file_name</b> inside the <b> year</b> variable.
										</p>
										<p>
											<pre><code class="language-python">year = file_name['Year']
year = time_blu.values
										</code></pre>
										</p>
										<p>
											Store the total precipitation collumn (Total) from <b>file_name</b> inside the <b> total_rain</b> variable.
										</p>
										<p>
										<pre><code class="language-python">total_rain = file_name['Total']
total_rain = total_rain_blu.values</code></pre>
										</p>
										<p>
											Store the november maximum daily precipitation (DayMax) collumn from <b>file_name</b> inside the <b> max_rain</b> variable.
										</p>										
										<p>
										<pre><code class="language-python">max_rain = file_name['DayMax']
max_rain = max_rain.values
										</code></pre>
										</p>
										<p>
											Create the figure plot to draw the graph.
										</p>
										<p>
											<pre><code class="language-python">fig, axs = plt.subplots(1, 1)</code></pre>
										</p>

										<p>Using <b> numpy</b>, set the X and Y axis ticks according to the CSV file.</p>
								
										<p>
											<pre><code class="language-python">x_major_ticks = np.arange(1945, 2011, 5)
y_major_ticks = np.arange(0, 1001, 200)

											</code></pre>
										</p>

										<p> For the first line, put the <b>year</b> variable as the first parameter and 
											the <b>max_rain</b> as second. Set the <b>linestyle</b> as solid, with a dot <b>marker</b>
											in each data. Also, set the <b>linewidth</b> as 2 and the color as
											<b>C0</b> (Blue).
										</p> 
										<p>
										<pre><code class="language-python">
										axs.plot(year, max_rain,label='Total precipitation', 
												 linestyle='-', marker='.', linewidth=2, 
												 color='C0')      
										</pre></code></p>

										<p> For the second line, put the <b>year</b> variable as the first parameter and 
											the <b>total_rain</b> as second. Again, set the <b>linestyle</b> as solid, with 
											a dot <b>marker</b> in each data. Also, set the <b>linewidth</b> as 2, and the
											 color as <b>crimson</b> (Red).
										</p> 
										<p>
										<pre><code class="language-python">
											axs.plot(year, total_rain, 
													 label='Daily maximum precipitation', 
													 linestyle='-', marker='.', 
													 linewidth=2, color='crimson')     
										</pre></code></p>

										<p> Set the legend size and location.
										</p> 
										<p>
										<pre><code class="language-python">axs.legend(loc='upper left',fontsize=8)     
										</pre></code></p>

										<p> Use the <b>set_minor_locator</b> and <b>tick_params</b> to create nice axis ticks.
										</p> 
										<p>
										<pre><code class="language-python">axs.yaxis.set_minor_locator(AutoMinorLocator())
axs.tick_params(which='both',  width=2)
axs.tick_params(which='major', length=7)
axs.tick_params(which='minor', length=4)
										</pre></code></p>										

										<p> Import the ticks created earlier with <b>Numpy</b>.
										</p> 
										<p>
										<pre><code class="language-python">axs.set_xticks(x_major_ticks)
axs.set_yticks(y_major_ticks)
										</pre></code></p>										

										<p> Set axis labels.
										</p> 
										<p>
										<pre><code class="language-python">axs.set_ylabel('Precipitation [mm]',fontsize=9)
axs.set_xlabel('Year',fontsize=9)
										</pre></code></p>										

										<p> Set graph title.
										</p> 
										<p>
										<pre><code class="language-python">axs.set_title('November precipitation history')
										</pre></code></p>										

										<p> You can also highlight a specific part of the graph. In our case, 2008 was an extreme rainy
											year, so we gonna add a reference line in this year and write the amount of precipitation 
											for both red and blue lines. 
										</p> 
										<p>
										<pre><code class="language-python">
											axs.axvline(2008, color='k', linestyle=':', 
													    linewidth=1)
											axs.text(2003.7,980,'1001.2',color='C0')
											axs.text(2003.7,250,'250.9',color='crimson')
										</pre></code></p>

										<p> Save the figure.
										</p> 
										<p>
										<pre><code class="language-python">fig.set_size_inches(11, 3)
fig.savefig('xy_graph_csv.png',transparent=False, 
			bbox_inches='tight', pad_inches=0, 
			dpi=250)
										</pre></code></p>											

										<p> Here is our figure. Note that there is gaps in both lines. 
											This is caused from the NaNs in our data.
										</p>
										
										<p><img src="images/blog/xy_graph_csv.png" width="100%" /></p>

										<p>The complete script is:</p>

										<p>
										<pre><code class="language-python">

											"""
											File name:      xy_graph_csv.py
											Author:         Ueslei Adriano Sutil
											Email:          uesleisutil1@gmail.com
											Created:        12 June 2020
											Last modified:  12 June 2020
											"""
											
											# Import libraries.
											import pandas as pd
											import numpy as np
											from matplotlib.ticker import AutoMinorLocator
											import matplotlib.pyplot as plt
											
											# Open CSV file and import variables.
											file_name = pd.read_csv('blumenau.csv', 
														keep_default_na=True,delimiter=',', 
														header=None,
														names=['Year','Total', 'DayMax'])
											
											# Import CSV data.
											year = file_name['Year']
											year = year.values
											total_rain = file_name['Total']
											total_rain = total_rain.values
											max_rain = file_name['DayMax']
											max_rain = max_rain.values
											
											# Create figures plots.
											fig, axs = plt.subplots(1, 1)
											
											# Set X and Y ticks.
											x_major_ticks  = np.arange(1945, 2011, 5)
											y_major_ticks  = np.arange(0, 1001, 200)
											
											# Plot the figures.
											axs.plot(year, max_rain,label='Total precipitation',
													linestyle='-', marker='.', linewidth=2,
													color='C0')    
											axs.plot(year, total_rain,
													label='Daily maximum precipitation',
													linestyle='-', marker='.',
													linewidth=2, color='crimson')
											
											# Set legend.																			
											axs.legend(loc='upper left',fontsize=8)   
											
											# Create nice axis.
											axs.yaxis.set_minor_locator(AutoMinorLocator())
											axs.tick_params(which='both',  width=2)
											axs.tick_params(which='major', length=7)
											axs.tick_params(which='minor', length=4)
											
											# Import ticks.
											axs.set_xticks(x_major_ticks)
											axs.set_yticks(y_major_ticks)
											
											# Set axis labels.
											axs.set_ylabel('Precipitation [mm]',fontsize=9)
											axs.set_xlabel('Year',fontsize=9)
											
											# Set title.
											axs.set_title('November precipitation')
											
											# Highlight a specific part of the graph.
											axs.axvline(2008, color='k', linestyle=':',
												   linewidth=1)
											axs.text(2003.7,980,'1001.2',color='C0')
											axs.text(2003.7,250,'250.9',color='crimson')
											
											# Save figure.
											fig.savefig('xy_graph_csv.png',transparent=False, 
												        bbox_inches='tight', pad_inches=0, 
													   dpi=250)
												  </code></pre>
											  </p>

											  <div class="fb-like" data-href="https://uesleisutil.com.br/graph-plotting-w-python-matplotlib.html" data-width="350" data-layout="button_count" data-action="like" data-size="large" data-share="true"></div>
									</div>

								</div>
							</div>
						</div>
						<!-- title -->
						<div class="title">Comments</div>
						<div class="fb-comments" data-href="https://uesleisutil.com.br/graph-plotting-w-python-matplotlib.html" data-mobile="Auto-detected" colorscheme="Dark" data-numposts="5" data-width="450"></div>
						

					</div>

				</div>
			</div>

		</div>
	</div>
	
	<!--
		jQuery Scripts
	-->
	<script src="js/jquery.min.js"></script>
	<script src="js/jquery.validate.js"></script>
	<script src="js/jquery.magnific-popup.js"></script>
	<script src="js/imagesloaded.pkgd.js"></script>
	<script src="js/isotope.pkgd.js"></script>
	<script src="js/jquery.slimscroll.js"></script>
	<script src="js/owl.carousel.js"></script>
	<script src="js/prism.js"></script>
	<script src="js/prism-normalize-whitespace.js"></script>
	<script type="text/javascript">
		// Optional
		Prism.plugins.NormalizeWhitespace.setDefaults({
			'remove-trailing': true,
			'remove-indent': true,
			'left-trim': true,
			'right-trim': true,
		});
		</script>
	<!--
		Google map api
	-->
	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDz2w7HUaWudHwd7AWQpCL48Qs050WOn9s"></script>
	
	<!--
		Main Scripts
	-->
	<script src="js/scripts.js"></script>
	
</body>
</html>